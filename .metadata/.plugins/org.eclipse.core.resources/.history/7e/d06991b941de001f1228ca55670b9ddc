package metodes_4;
import java.util.*;

public class metodes4_2 {

    public static void main(String[] args) {
        String Nums = entradaNums();
        int dia = dia(Nums);
        int mes = mes(Nums);
        int any = any(Nums);
        
        if(EsValidAny(any) && EsValidMes(mes) && EsValidDia(dia, mes, any)) {
            String DiaSetmana = EsValidDiaDeLaSemana(dia, mes, any);
            System.out.println();
            System.out.println("La teva data es: " + DiaSetmana + " dia " + dia + " de " + obtenirNomMes(mes) + " de " + any);
        } 
        if (!EsValidAny(any)) {
            System.err.println("L'any es invalid, l'any ha de ser entre el 2021 - 2024!");
        }
        if (!EsValidMes(mes)) {
            System.err.println("El mes es invalid, el mes ha de ser entre 1 - 12!");
        }
        if (!EsValidDia(dia, mes, any)) {
            System.err.println("El dia es invalid, el any NO es de tráspas!");
        }
    }

    public static String entradaNums() {
        Scanner in = new Scanner(System.in);
        System.out.print("Introdueix una data en format dd/mm/aaaa (anys vàlids: 2021-2024): ");
        return in.nextLine();
    }

    public static int dia(String Nums) {
    	// Retornamos el valor en int de dia
    	// Básicamente lo que hacemos con split es dividir la cadena, es decir en el formato
    	// "dd/mm/aaaa", lo que cogeriamos aqui seria "dd" hasta que coja la primera "/"
    	return Integer.parseInt(Nums.split("/")[0]);
    }
    public static int dia(int dia) {
        return dia;
    }

    public static int mes(String Nums) {
    	// Aqui como ya he explicado cogemos el int de mes
    	// En esta parte de aqui del "dd/mm/aaaa" lo que cogeriamos seria el "mm"
        return Integer.parseInt(Nums.split("/")[1]);
    }
    public static int mes(int mes) {
        return mes;
    }

    public static int any(String Nums) {
    	// Aqui como ya he explicado cogemos el int de año
    	// En esta parte de aqui del "dd/mm/aaaa" lo que cogeriamos seria el "aaaa"
        return Integer.parseInt(Nums.split("/")[2]);
    }
    public static int any(int any) {
        return any;
    }

    public static boolean EsValidDia(int dia, int mes, int any) {
        // Tenemos una matriz de 12, bueno en java es de 11, pero bueno
    	int[] diesPerMes = {31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
        // Básicamente lo que hacemos aqui abajo es mirar si el año es bisiesto
    	// Si es bisiesto agregamos 1 dia más a febrero.
        if ((any % 4 == 0 && any % 100 != 0) || (any % 400 == 0)) {
            diesPerMes[1] = 29; 
        }
        // Retornamos el dia
        return dia >= 1 && dia <= diesPerMes[mes - 1];
    }

    public static boolean EsValidMes(int mes) {
        return mes >= 1 && mes <= 12;
    }

    public static boolean EsValidAny(int any) {
        return any >= 2021 && any <= 2024;
    }

    public static String EsValidDiaDeLaSemana(int dia, int mes, int any) {
        if (mes == 1 || mes == 2) {
            mes += 12;
            any--;
        }
        //Ejemplo de lo que haria el programa:
        //Tenemos esta fecha vaya dia = 12, mes = 2, y año = 2023
        int K = any % 100; // Esto daria 23 
        int J = any / 100; // Esto daria 20
        int h = (dia + (13 * (mes + 1)) / 5 + K + (K / 4) + (J / 4) + (5 * J)) % 7; 
        // ^^ Esto seria asi (12 + 39 + 22 + 5 + 5 + 100) % 7 = 183 % 7 = 1, h seria 1, que seria Diumenge
        String[] diesSetmana = {"Dissabte", "Diumenge", "Dilluns", "Dimarts", "Dimecres", "Dijous", "Divendres"};
        return diesSetmana[h];
    }

    public static String obtenirNomMes(int mes) {
        String[] nomsMesos = {"gener", "febrer", "març", "abril", "maig", "juny", "juliol", "agost", "setembre", "octubre", "novembre", "desembre"};
        return nomsMesos[mes - 1];
    }
}
